<!-- Step 1: Basic Information -->
<form method="post"
      hx-post="{% url 'positioning:icp_create' %}"
      hx-target="#wizard-content"
      hx-swap="innerHTML"
      class="p-6 space-y-6"
      x-data="{ customerType: '{{ wizard_data.customer_type|default:'b2b' }}' }">
    {% csrf_token %}
    <input type="hidden" name="step" value="1">

    <div class="mb-6">
        <h3 class="text-lg font-semibold text-apple-gray-600">Basic Information</h3>
        <p class="text-sm text-apple-gray-400 mt-1">Tell us about your ideal customer.</p>
    </div>

    <!-- Customer Type -->
    <div>
        <label class="block text-sm font-medium text-apple-gray-600 mb-3">Customer Type</label>
        <div class="grid grid-cols-2 gap-3">
            <label class="relative cursor-pointer">
                <input type="radio" name="customer_type" value="b2b" x-model="customerType" class="sr-only peer">
                <div class="border border-apple-gray-200 rounded-xl p-4 peer-checked:border-apple-blue peer-checked:bg-apple-blue/5 hover:border-apple-gray-300 transition-all">
                    <p class="text-sm font-medium text-apple-gray-600">Business (B2B)</p>
                    <p class="text-xs text-apple-gray-400 mt-0.5">Selling to companies</p>
                </div>
            </label>
            <label class="relative cursor-pointer">
                <input type="radio" name="customer_type" value="b2c" x-model="customerType" class="sr-only peer">
                <div class="border border-apple-gray-200 rounded-xl p-4 peer-checked:border-apple-blue peer-checked:bg-apple-blue/5 hover:border-apple-gray-300 transition-all">
                    <p class="text-sm font-medium text-apple-gray-600">Consumer (B2C)</p>
                    <p class="text-xs text-apple-gray-400 mt-0.5">Selling to individuals</p>
                </div>
            </label>
        </div>
    </div>

    <!-- ICP Name -->
    <div>
        <label for="name" class="block text-sm font-medium text-apple-gray-600 mb-2">ICP Name</label>
        <input type="text" name="name" id="name" required value="{{ wizard_data.name|default:'' }}"
               :placeholder="customerType === 'b2b' ? 'e.g., Growth-Stage SaaS Companies' : 'e.g., Health-Conscious Millennials'"
               class="block w-full rounded-lg border border-apple-gray-200 px-4 py-2.5 text-apple-gray-600 placeholder-apple-gray-400 text-sm">
    </div>

    <!-- Industry -->
    <div>
        <label for="industry" class="block text-sm font-medium text-apple-gray-600 mb-2">
            <span x-text="customerType === 'b2b' ? 'Industry' : 'Niche / Market'"></span>
        </label>
        <input type="text" name="industry" id="industry" required value="{{ wizard_data.industry|default:'' }}"
               :placeholder="customerType === 'b2b' ? 'e.g., Technology, Healthcare' : 'e.g., Fitness, Personal Finance'"
               class="block w-full rounded-lg border border-apple-gray-200 px-4 py-2.5 text-apple-gray-600 placeholder-apple-gray-400 text-sm">
    </div>

    <!-- B2B: Company Size -->
    <div x-show="customerType === 'b2b'" x-cloak>
        <label for="company_size" class="block text-sm font-medium text-apple-gray-600 mb-2">Company Size</label>
        <select name="company_size" id="company_size" :required="customerType === 'b2b'"
                class="block w-full rounded-lg border border-apple-gray-200 px-4 py-2.5 text-apple-gray-600 text-sm">
            <option value="">Select size...</option>
            {% for value, label in company_size_choices %}
            <option value="{{ value }}" {% if wizard_data.company_size == value %}selected{% endif %}>{{ label }}</option>
            {% endfor %}
        </select>
    </div>

    <!-- B2C: Age Range -->
    <div x-show="customerType === 'b2c'" x-cloak>
        <label for="age_range" class="block text-sm font-medium text-apple-gray-600 mb-2">Age Range</label>
        <select name="age_range" id="age_range" :required="customerType === 'b2c'"
                class="block w-full rounded-lg border border-apple-gray-200 px-4 py-2.5 text-apple-gray-600 text-sm">
            <option value="">Select age range...</option>
            {% for value, label in age_range_choices %}
            <option value="{{ value }}" {% if wizard_data.age_range == value %}selected{% endif %}>{{ label }}</option>
            {% endfor %}
        </select>
    </div>

    <!-- Navigation -->
    <div class="flex justify-end pt-6 border-t border-apple-gray-100">
        <button type="submit" name="action" value="next"
                class="inline-flex items-center px-5 py-2.5 text-sm font-medium text-white bg-apple-blue rounded-lg hover:bg-blue-600 transition-colors">
            Next
            <svg class="ml-2 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
            </svg>
        </button>
    </div>
</form>

<style>[x-cloak] { display: none !important; }</style>
