<!-- Profile Results Table -->
<div class="card overflow-hidden">
    <!-- Results count -->
    <div class="px-5 py-3 border-b border-apple-gray-100 bg-apple-gray-50">
        <p class="text-sm text-apple-gray-400">
            Showing <span class="font-medium text-apple-gray-500">{{ page_obj.start_index|default:0 }}</span> to
            <span class="font-medium text-apple-gray-500">{{ page_obj.end_index|default:0 }}</span> of
            <span class="font-medium text-apple-gray-500">{{ page_obj.paginator.count|default:0 }}</span> partners
        </p>
    </div>

    <!-- Table -->
    <div class="overflow-x-auto">
        <table class="min-w-full divide-y divide-apple-gray-100">
            <thead class="bg-apple-gray-50">
                <tr>
                    <th scope="col" class="px-5 py-3 text-left text-xs font-semibold text-apple-gray-400 uppercase tracking-wider">
                        Partner
                    </th>
                    <th scope="col" class="px-5 py-3 text-left text-xs font-semibold text-apple-gray-400 uppercase tracking-wider">
                        Niche
                    </th>
                    <th scope="col" class="px-5 py-3 text-left text-xs font-semibold text-apple-gray-400 uppercase tracking-wider">
                        Audience
                    </th>
                    <th scope="col" class="px-5 py-3 text-left text-xs font-semibold text-apple-gray-400 uppercase tracking-wider">
                        Status
                    </th>
                    <th scope="col" class="relative px-5 py-3">
                        <span class="sr-only">View</span>
                    </th>
                </tr>
            </thead>
            <tbody class="bg-white divide-y divide-apple-gray-100">
                {% for profile in profiles %}
                <tr class="hover:bg-apple-gray-50 transition-colors">
                    <td class="px-5 py-4 whitespace-nowrap">
                        <div class="flex items-center">
                            <div class="flex-shrink-0 h-10 w-10">
                                {% if profile.avatar_url %}
                                <img class="h-10 w-10 rounded-full object-cover" src="{{ profile.avatar_url }}" alt="">
                                {% else %}
                                <div class="h-10 w-10 rounded-full bg-apple-blue/10 flex items-center justify-center">
                                    <span class="text-apple-blue font-semibold text-sm">{{ profile.name|slice:":2"|upper }}</span>
                                </div>
                                {% endif %}
                            </div>
                            <div class="ml-4">
                                <div class="text-sm font-medium text-apple-gray-600">{{ profile.name }}</div>
                                {% if profile.company %}
                                <div class="text-sm text-apple-gray-400">{{ profile.company }}</div>
                                {% endif %}
                            </div>
                        </div>
                    </td>
                    <td class="px-5 py-4">
                        <div class="text-sm text-apple-gray-600 max-w-xs truncate">{{ profile.niche|default:"-" }}</div>
                        {% if profile.business_focus %}
                        <div class="text-sm text-apple-gray-400 max-w-xs truncate">{{ profile.business_focus }}</div>
                        {% endif %}
                    </td>
                    <td class="px-5 py-4 whitespace-nowrap">
                        {% if profile.list_size > 0 %}
                        <span class="text-sm text-apple-gray-600">{{ profile.list_size|floatformat:0 }}</span>
                        <span class="text-xs text-apple-gray-400">list</span>
                        {% endif %}
                        {% if profile.social_reach > 0 %}
                        <div class="text-xs text-apple-gray-400">{{ profile.social_reach|floatformat:0 }} social</div>
                        {% endif %}
                        {% if profile.list_size == 0 and profile.social_reach == 0 %}
                        <span class="text-sm text-apple-gray-300">-</span>
                        {% endif %}
                    </td>
                    <td class="px-5 py-4 whitespace-nowrap">
                        <span class="inline-flex px-2.5 py-1 text-xs font-medium rounded-full
                            {% if profile.status == 'Member' %}bg-green-50 text-green-700
                            {% elif profile.status == 'Non Member Resource' %}bg-apple-blue/10 text-apple-blue
                            {% else %}bg-yellow-50 text-yellow-700{% endif %}">
                            {{ profile.status }}
                        </span>
                    </td>
                    <td class="px-5 py-4 whitespace-nowrap text-right text-sm font-medium">
                        <a href="{% url 'matching:partner-detail' profile.id %}" class="text-apple-blue hover:text-blue-600 transition-colors">
                            View
                        </a>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="5" class="px-5 py-12 text-center">
                        <div class="w-14 h-14 mx-auto mb-4 rounded-full bg-apple-gray-100 flex items-center justify-center">
                            <svg class="h-7 w-7 text-apple-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/>
                            </svg>
                        </div>
                        <h3 class="text-base font-semibold text-apple-gray-600 mb-1">No partners found</h3>
                        <p class="text-sm text-apple-gray-400">Try adjusting your search or filters.</p>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <!-- Pagination -->
    {% if page_obj.has_other_pages %}
    <div class="px-5 py-4 border-t border-apple-gray-100">
        <nav class="flex items-center justify-between">
            <div class="hidden sm:block">
                <p class="text-sm text-apple-gray-400">
                    Page <span class="font-medium text-apple-gray-500">{{ page_obj.number }}</span> of
                    <span class="font-medium text-apple-gray-500">{{ page_obj.paginator.num_pages }}</span>
                </p>
            </div>
            <div class="flex-1 flex justify-between sm:justify-end space-x-2">
                {% if page_obj.has_previous %}
                <a href="?page={{ page_obj.previous_page_number }}{% if current_search %}&search={{ current_search }}{% endif %}{% if current_niche %}&niche={{ current_niche }}{% endif %}{% if current_status %}&status={{ current_status }}{% endif %}"
                   hx-get="{% url 'matching:partners' %}?page={{ page_obj.previous_page_number }}{% if current_search %}&search={{ current_search }}{% endif %}{% if current_niche %}&niche={{ current_niche }}{% endif %}{% if current_status %}&status={{ current_status }}{% endif %}"
                   hx-target="#profile-results"
                   class="inline-flex items-center px-4 py-2 text-sm font-medium text-apple-gray-500 bg-white border border-apple-gray-200 rounded-lg hover:bg-apple-gray-50 transition-colors">
                    Previous
                </a>
                {% endif %}
                {% if page_obj.has_next %}
                <a href="?page={{ page_obj.next_page_number }}{% if current_search %}&search={{ current_search }}{% endif %}{% if current_niche %}&niche={{ current_niche }}{% endif %}{% if current_status %}&status={{ current_status }}{% endif %}"
                   hx-get="{% url 'matching:partners' %}?page={{ page_obj.next_page_number }}{% if current_search %}&search={{ current_search }}{% endif %}{% if current_niche %}&niche={{ current_niche }}{% endif %}{% if current_status %}&status={{ current_status }}{% endif %}"
                   hx-target="#profile-results"
                   class="inline-flex items-center px-4 py-2 text-sm font-medium text-apple-gray-500 bg-white border border-apple-gray-200 rounded-lg hover:bg-apple-gray-50 transition-colors">
                    Next
                </a>
                {% endif %}
            </div>
        </nav>
    </div>
    {% endif %}
</div>
